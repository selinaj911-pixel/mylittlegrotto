<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>çµå¢ƒÂ·å¤©æœºè‡ªå®ˆå½• (å› æœåœ†æ»¡ç‰ˆ)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --ink: #2c3e50; --paper: #f4f1de; --lamp-glow: #e6b422;
            --crimson: #a0522d; --teal: #4a6572; --border: rgba(44, 62, 80, 0.15);
            --gold: #d4af37;
        }

        body {
            background-color: var(--paper); background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            color: var(--ink); font-family: "STSong", "KaiTi", serif; margin: 0; padding: 20px;
        }

        .dashboard { display: grid; grid-template-columns: 350px 1fr; gap: 20px; max-width: 1400px; margin: auto; }
        .sidebar { position: sticky; top: 20px; }
        .card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border-radius: 12px; border: 1px solid var(--border); padding: 18px; margin-bottom: 18px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

        /* çŠ¶æ€æ±‡æ€»æ  */
        .status-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .mini-board { padding: 12px; border-radius: 12px; border: 2px solid var(--border); background: rgba(255,255,255,0.4); min-height: 120px; }
        .mini-title { font-weight: bold; font-size: 0.9rem; margin-bottom: 8px; border-bottom: 1px solid var(--border); padding-bottom: 4px; }
        
        /* å¢ƒç•Œä¸ç•ªèŒ„é’Ÿ */
        .realm-info { text-align: center; }
        .realm-title { font-size: 1.3rem; font-weight: bold; color: var(--crimson); }
        .exp-container { width: 100%; background: rgba(0,0,0,0.05); height: 8px; border-radius: 4px; margin: 10px 0; overflow: hidden; border: 1px solid #ddd; }
        #exp-bar { height: 100%; background: linear-gradient(90deg, var(--teal), var(--lamp-glow)); width: 0%; transition: 1s; }
        .timer-display { font-family: monospace; font-size: 2.5rem; color: var(--crimson); font-weight: bold; text-align: center; }

        /* ä»»åŠ¡åˆ—è¡¨ */
        .board-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .topic-card { min-height: 420px; display: flex; flex-direction: column; }
        .topic-header { font-weight: bold; border-bottom: 2px solid var(--ink); padding-bottom: 6px; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .task-list { flex: 1; overflow-y: auto; max-height: 250px; }
        
        .task-item { background: rgba(255,255,255,0.4); padding: 8px; border-radius: 6px; margin-bottom: 6px; border: 1px solid transparent; font-size: 0.85rem; display: flex; align-items: center; }
        .check-box { width: 16px; height: 16px; margin-right: 10px; cursor: pointer; }
        
        .tag-label { font-size: 0.65rem; padding: 2px 5px; border-radius: 4px; margin-left: auto; background: var(--border); }
        .tag-ç ´å±€ { background: #e8f5e9; color: #2e7d32; }
        .tag-æŒæ§ { background: #e3f2fd; color: #1565c0; }
        .tag-è¾¨æ { background: #fff3e0; color: #ef6c00; }
        .tag-é“å¿ƒ { background: #f3e5f5; color: #7b1fa2; }

        /* è¾“å…¥ä¸äº¤äº’ */
        .input-box { margin-top: auto; padding-top: 10px; }
        .input-box input { width: 100%; box-sizing: border-box; padding: 8px; margin-bottom: 5px; border: 1px solid var(--ink); border-radius: 4px; font-size: 0.8rem; }
        .btn-row { display: flex; gap: 4px; }
        .small-btn { flex: 1; font-size: 0.65rem; padding: 4px; cursor: pointer; border: 1px solid var(--ink); background: white; border-radius: 4px; }
        .small-btn:hover { background: var(--border); }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; z-index: 1000; justify-content: center; align-items: center; }
        .modal { background: var(--paper); padding: 25px; border-radius: 12px; max-width: 450px; border-left: 8px solid var(--lamp-glow); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="sidebar">
        <div class="card realm-info">
            <div id="quote-display" style="font-size: 0.8rem; font-style: italic; margin-bottom: 12px; color:var(--crimson);">â€œå²å¯’ï¼Œç„¶åçŸ¥æ¾æŸä¹‹åå‡‹ä¹Ÿã€‚â€</div>
            <div class="realm-title" id="realm-display">è½½å…¥ä¸­...</div>
            <div class="exp-container"><div id="exp-bar"></div></div>
            <div id="hobby-status-box" style="margin-top: 15px; padding: 10px; background: rgba(74, 101, 114, 0.1); border-radius: 8px;">
                <div style="font-size: 0.7rem; color: var(--teal); font-weight: bold; margin-bottom: 5px;">ğŸƒ çº¢å°˜é›…å…´è¿›åº¦</div>
                 <div style="width: 100%; background: rgba(0,0,0,0.05); height: 6px; border-radius: 3px; overflow: hidden;">
                    <div id="hobby-bar" style="height: 100%; background: var(--teal); width: 0%; transition: 0.5s;"></div>
                </div>
                <div id="hobby-text" style="font-size: 0.6rem; margin-top: 4px; color: #666;">ç§¯æ”’é›…å…´ä»¥è§¦å‘è½¶äº‹ (0/5)</div>
            </div>
            <button onclick="showWeeklySummary()" style="margin-top:10px; width:100%; cursor:pointer; background:var(--ink); color:white; border:none; padding:8px; border-radius:4px;">ğŸ“– æŸ¥é˜…ä¸ƒæ—¥æ‰¹æ–‡</button>
        </div>

        <div class="card" style="height: 280px;"><canvas id="radarChart"></canvas></div>

        <div class="card">
            <div style="font-weight:bold; text-align:center; font-size:0.9rem;">âŒ› å‘¨å¤©å…¥å®š</div>
            <div class="timer-display" id="timer-display">25:00</div>
            <button onclick="toggleTimer()" id="timer-btn" style="width:100%; background:var(--ink); color:white; border:none; padding:10px; border-radius:4px; cursor:pointer;">å¼€å¯å…¥å®š</button>
            <div style="text-align:center; font-size:0.65rem; margin-top:8px; opacity:0.6;">åœ†æ»¡å³è·ä¸€æ¬¡æœºç¼˜å¥‡é‡</div>
        </div>
    </div>

    <div class="main-content">
        <div class="status-container">
            <div class="mini-board" style="border-color: var(--crimson);">
                <div class="mini-title" style="color:var(--crimson);">âš¡ è¿‘æœŸé›·åŠ« (Deadlines)</div>
                <div id="deadline-list" style="font-size:0.75rem;"></div>
            </div>
            <div class="mini-board" style="border-color: var(--gold);">
                <div class="mini-title" style="color:var(--gold);">âœ¨ ä»™å¢ƒå¥‡é‡ (Milestones)</div>
                <div id="adventure-list" style="font-size:0.75rem;"></div>
            </div>
        </div>

        <div class="board-container">
            <div class="card topic-card">
                <div class="topic-header">ğŸ“œ ç ”ç©¶å­¦ä¹  (Research)</div>
                <div class="task-list" id="list-ç ”ç©¶"></div>
                <div class="input-box">
                    <input type="text" id="in-ç ”ç©¶" onkeypress="handleEnter(event, 'ç ”ç©¶')" placeholder="è¾“å…¥å†…å®¹ #æ ‡ç­¾...">
                    <div class="btn-row">
                        <button class="small-btn" onclick="addDeadlinePrompt('ç ”ç©¶')">âš¡é›·åŠ«</button>
                        <button class="small-btn" onclick="addAdventurePrompt('ç ”ç©¶')">âœ¨å¥‡é‡</button>
                    </div>
                </div>
            </div>

            <div class="card topic-card">
                <div class="topic-header">ğŸ¤ è‚²äººå·¥ä½œ (Teaching)</div>
                <div class="task-list" id="list-è‚²äºº"></div>
                <div class="input-box">
                    <input type="text" id="in-è‚²äºº" onkeypress="handleEnter(event, 'è‚²äºº')" placeholder="äº‹åŠ¡ #é“å¿ƒ...">
                    <div class="btn-row">
                        <button class="small-btn" onclick="addDeadlinePrompt('è‚²äºº')">âš¡é›·åŠ«</button>
                    </div>
                </div>
            </div>

            <div class="card topic-card"><div class="topic-header">âš”ï¸ é‡‘èº«è‡ªæŒ (è¿åŠ¨)</div><div class="task-list" id="list-è¿åŠ¨"></div><div class="input-box"><input type="text" id="in-è¿åŠ¨" onkeypress="handleEnter(event, 'è¿åŠ¨')"></div></div>
            <div class="card topic-card"><div class="topic-header">ğŸ’ ç¢ç‰é€¸è‡´ (æ‰‹å·¥)</div><div class="task-list" id="list-æ‰‹å·¥"></div><div class="input-box"><input type="text" id="in-æ‰‹å·¥" onkeypress="handleEnter(event, 'æ‰‹å·¥')"></div></div>
            <div class="card topic-card"><div class="topic-header">ğŸ‡°ğŸ‡· å¼‚åŸŸç¥è¯† (éŸ©è¯­)</div><div class="task-list" id="list-éŸ©è¯­"></div><div class="input-box"><input type="text" id="in-éŸ©è¯­" onkeypress="handleEnter(event, 'éŸ©è¯­')"></div></div>
        </div>
    </div>
</div>

<div class="overlay" id="overlay">
    <div class="modal"><div id="modal-title" style="font-weight:bold; color:var(--crimson);"></div><div id="modal-content" style="margin-top:12px; white-space: pre-wrap;"></div><button onclick="closeModal()" style="margin-top:15px; width:100%; cursor:pointer; background:var(--ink); color:white; border:none; padding:8px; border-radius:4px;">æ”¶åŠŸ</button></div>
</div>

<script>
    const START_VAL = 5.4, NEED_EXP = 2800;
    const timerAdventures = ["å®šä¸­ç¥æ¸¸ï¼Œæ‚Ÿå‡ºç®—æ³•ç²¾é«“ã€‚","è¯†æµ·æ¸…æ˜ï¼Œç ´å±€æ„Ÿæ‚Ÿ+1ã€‚","éŸ©è¯­è¯­æ„Ÿåœ¨å…¥å®šä¸­æ‚„ç„¶è‹é†’ã€‚","TAå·¥ä½œçš„çƒ¦èºåœ¨å®šä¸­åŒ–ä¸ºæ…ˆæ‚²ã€‚"];
    const hobbyStories = [
    "ä½ åœ¨è¿åŠ¨åæ“¦æ±—æ—¶ï¼Œçªç„¶è§‰å¾—è¯†æµ·ä¸€é˜µæ¸…å‡‰ï¼Œä»¿ä½›çœ‹åˆ°äº†è®ºæ–‡çš„é€»è¾‘æ¼æ´ã€‚",
    "å®Œæˆæ‰‹å·¥çš„ç¬é—´ï¼Œä½ å‘ç°ä¸“æ³¨åŠ›ç«Ÿç„¶å¯ä»¥å¦‚æ­¤å‡ç»ƒï¼Œè¿™ç§æ„Ÿè§‰å¾ˆé€‚åˆå»æ¨å¯¼å…¬å¼ã€‚",
    "å½“ä½ å¿µå‡†é‚£ä¸ªéŸ©è¯­å‘éŸ³æ—¶ï¼Œå¶ç„¶è·¯è¿‡çš„çŒ«ä¼¼ä¹å¬æ‡‚äº†ä½ çš„â€˜ì•ˆë…•í•˜ì„¸ìš”â€™ã€‚",
    "åœ¨æ‹‰ä¼¸èº«ä½“æ—¶ï¼Œä½ æ‚Ÿåˆ°äº†ï¼šèº«ä½“çš„æŸ”éŸ§æ€§ä¸ä»£ç çš„è§£è€¦å…¶å®æ˜¯ä¸€ä¸ªé“ç†ã€‚",
    "ä»Šæ—¥åšå®Œæ‰‹å·¥ï¼Œçœ‹ç€çœ¼å‰çš„é€ ç‰©ï¼Œä½ çªç„¶å¯¹â€˜ç»“æ„åŒ–æ€ç»´â€™æœ‰äº†å…·è±¡çš„ç†è§£ã€‚",
    "éŸ©è¯­å¬åŠ›ç»ƒä¹ ä¸­ï¼Œä½ æ•æ‰åˆ°äº†ä¸€ä¸ªé«˜é¢‘è¯ï¼Œè¿™è®©ä½ å¯¹å¼‚åŸŸæ–‡åŒ–çš„ç†è§£åˆæ·±äº†ä¸€å±‚ã€‚"
    ];

    let state = JSON.parse(localStorage.getItem('dao_pc_v11')) || {
        overall: START_VAL, totalExp: 0,
        attributes: { "ç ´å±€": 6.5, "æŒæ§": 5.0, "é“å¿ƒ": 4.0, "è¾¨æ": 4.0 },
        tasks: [], deadlines: [], adventures: [], weeklyLogs: []
    };

    let myChart, timerInterval, timeLeft = 1500, isRunning = false;

    function save() { localStorage.setItem('dao_pc_v11', JSON.stringify(state)); }

    // --- æ ¸å¿ƒå½•å…¥ç³»ç»Ÿ ---
    function handleEnter(e, topic) {
        if (e.key === 'Enter') {
            const val = e.target.value;
            if (!val) return;
            const tagMatch = val.match(/#(ç ´å±€|æŒæ§|è¾¨æ|é“å¿ƒ)/);
            const tag = tagMatch ? tagMatch[1] : null;
            const content = val.replace(/#\S+/, '').trim();
            state.tasks.push({ id: Date.now(), content, topic, tag, done: false });
            e.target.value = ''; save(); renderUI();
        }
    }

    // --- é›·åŠ«ä¸å¥‡é‡ (æ‰‹åŠ¨è¡¥å……å›æ¥çš„åŠŸèƒ½) ---
function addDeadlinePrompt(topic) {
    const inputEl = document.getElementById('in-' + topic);
    const content = inputEl.value.replace(/#\S+/, '').trim() || "æœªå‘½åé›·åŠ«";
    
    // è·å–æ ‡ç­¾ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
    const tagMatch = inputEl.value.match(/#(ç ´å±€|æŒæ§|è¾¨æ|é“å¿ƒ)/);
    const tag = tagMatch ? tagMatch[1] : null;

    // å¼¹å‡ºæ—¥æœŸé€‰æ‹©
    const date = prompt("è¯·å®šä¸‹é›·åŠ«é™ä¸´çš„å…·ä½“æ—¥æœŸ (æ ¼å¼: YYYY-MM-DD):", new Date().toISOString().split('T')[0]);
    
    if (date) {
        // æ ¡éªŒæ—¥æœŸæ ¼å¼æ˜¯å¦åˆæ³•
        if (isNaN(new Date(date).getTime())) {
            alert("æ—¥æœŸæ ¼å¼æœ‰è¯¯ï¼Œæ³•åŠ›æ— æ³•å‡ç»“ã€‚");
            return;
        }
        
        state.deadlines.push({ 
            id: Date.now(), 
            content: content, 
            topic: topic, 
            tag: tag, // ä¿ç•™èƒ½åŠ›æ ‡ç­¾
            due: date, 
            done: false 
        });
        
        inputEl.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        save(); 
        renderUI();
        showModal("âš¡ é›·åŠ«å·²å®š", `ã€${content}ã€‘\nå°†äº ${date} é™ä¸´ï¼Œè¯·é“å‹é€Ÿé€Ÿå‡†å¤‡ï¼`);
    }
}

    function addAdventurePrompt(topic) {
        const content = document.getElementById('in-'+topic).value || "æœªå‘½åå¥‡é‡";
        const type = prompt("è¯·è¾“å…¥å¥‡é‡ç±»å‹ (å¦‚: Paper Submission/Workshop):", "Paper Submission");
        if (type) {
            state.adventures.push({ id: Date.now(), content, type, topic });
            state.weeklyLogs.push({ date: new Date().toLocaleDateString(), type: "ä»™å¢ƒå¥‡é‡", content: `ã€${type}ã€‘${content}` });
            document.getElementById('in-'+topic).value = '';
            save(); renderUI();
            showModal("âœ¨ ä»™å¢ƒå¥‡é‡", `æœºç¼˜å·²è®°å…¥æ‰¹æ–‡ï¼š\n${content}`);
        }
    }

function completeTask(id, type = 'task') {
    const list = type === 'task' ? state.tasks : state.deadlines;
    const item = list.find(t => t.id === id);
    if (!item) return;

    item.done = true;

    // æ ¸å¿ƒé€»è¾‘åˆ¤æ–­
    if (["ç ”ç©¶", "è‚²äºº"].includes(item.topic)) {
        // æ ¸å¿ƒæ¿å—ï¼šå¢åŠ ä¿®ä¸ºå’Œé›·è¾¾å›¾å±æ€§
        const exp = (type === 'dead' ? 30 : 5);
        state.totalExp += exp;
        if (item.tag) {
            state.attributes[item.tag] = Math.min(10, state.attributes[item.tag] + 0.05);
        }
        state.overall = START_VAL + (state.totalExp / 1000);
        showModal("ã€å› æœäº†ç»“ã€‘", `${item.content}\nä¿®ä¸ºç²¾è¿›ï¼Œå±æ€§å·²å‡ã€‚`);
    } else {
        // é›…å…´æ¿å—ï¼šè¿åŠ¨ã€æ‰‹å·¥ã€éŸ©è¯­
        state.hobbyPoints = (state.hobbyPoints || 0) + 1;
        
        if (state.hobbyPoints >= 5) {
            state.hobbyPoints = 0; // æ»¡5æ¬¡é‡ç½®
            const story = hobbyStories[Math.floor(Math.random() * hobbyStories.length)];
            showModal("ğŸƒ é›…å…´è½¶äº‹", story);
            // è½¶äº‹ä¹Ÿè®°å…¥æ‰¹æ–‡
            state.weeklyLogs.push({ date: new Date().toLocaleDateString(), type: "é›…å…´æ„Ÿæ‚Ÿ", content: story });
        } else {
            showModal("â˜• é—²æƒ…é›…è‡´", `å·²ç»“äº†â€œ${item.content}â€ã€‚\nå½“å‰é›…å…´ç§¯æ”’ï¼š${state.hobbyPoints}/5`);
        }
    }

    save();
    renderUI();
    updateHobbyDisplay();
}

// åŒæ—¶åˆ«å¿˜äº†åœ¨ renderUI() å‡½æ•°ä¸­å¢åŠ è¿›åº¦æ¡çš„æ›´æ–°ï¼š
function updateHobbyDisplay() {
    const percent = (state.hobbyPoints / 5) * 100;
    document.getElementById('hobby-bar').style.width = percent + "%";
    document.getElementById('hobby-text').innerText = `ç§¯æ”’é›…å…´ä»¥è§¦å‘è½¶äº‹ (${state.hobbyPoints}/5)`;
}
// è¯·åœ¨ renderUI() çš„æœ€åä¸€è¡ŒåŠ å…¥ï¼šupdateHobbyDisplay();

    // --- ç•ªèŒ„é’Ÿ ---
    function toggleTimer() {
        const btn = document.getElementById('timer-btn');
        if (!isRunning) {
            isRunning = true; btn.innerText = "ä¸­æ­¢";
            timerInterval = setInterval(() => {
                timeLeft--; updateTimerDisplay();
                if (timeLeft <= 0) finishTimer();
            }, 1000);
        } else {
            clearInterval(timerInterval); isRunning = false; btn.innerText = "å¼€å¯å…¥å®š";
        }
    }
    function updateTimerDisplay() {
        const m = Math.floor(timeLeft / 60), s = timeLeft % 60;
        document.getElementById('timer-display').innerText = `${m}:${s < 10 ? '0' + s : s}`;
    }
    function finishTimer() {
        clearInterval(timerInterval); isRunning = false; timeLeft = 1500;
        updateTimerDisplay(); document.getElementById('timer-btn').innerText = "å¼€å¯å…¥å®š";
        const adv = timerAdventures[Math.floor(Math.random()*timerAdventures.length)];
        state.weeklyLogs.push({ date: new Date().toLocaleDateString(), type: "å…¥å®šå¥‡é‡", content: adv });
        save(); renderUI(); showModal("ğŸ§˜â€â™‚ï¸ å‘¨å¤©åœ†æ»¡", adv);
    }

    // --- æ¸²æŸ“ ---
    function renderUI() {
        const topics = ["ç ”ç©¶", "è‚²äºº", "è¿åŠ¨", "æ‰‹å·¥", "éŸ©è¯­"];
        topics.forEach(t => {
            document.getElementById('list-' + t).innerHTML = state.tasks.filter(tk => !tk.done && tk.topic === t)
                .map(tk => `
                    <div class="task-item">
                        <input type="checkbox" class="check-box" onclick="completeTask(${tk.id})">
                        <span>${tk.content}</span>
                        ${tk.tag ? `<span class="tag-label tag-${tk.tag}">${tk.tag}</span>` : ''}
                    </div>
                `).join('');
        });

// æ¸²æŸ“é›·åŠ«ï¼ˆå¸¦æ™ºèƒ½å€’è®¡æ—¶ï¼‰
document.getElementById('deadline-list').innerHTML = state.deadlines.filter(d => !d.done).map(d => {
    const today = new Date();
    today.setHours(0, 0, 0, 0); // å½’é›¶æ—¶åˆ†ç§’ï¼Œä»…å¯¹æ¯”æ—¥æœŸ
    const targetDate = new Date(d.due);
    const diffTime = targetDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); // è®¡ç®—å¤©æ•°

    // æ ¹æ®ç´§æ€¥ç¨‹åº¦è®¾ç½®é¢œè‰²
    let color = "#666"; // é»˜è®¤
    let warning = "";
    if (diffDays <= 0) { color = "var(--crimson)"; warning = " [æ¸¡åŠ«ä¸­!]"; }
    else if (diffDays <= 3) { color = "#ff8c00"; warning = " [ç´§è¿«]"; }
    else { color = "var(--teal)"; }

    return `
        <div style="margin-bottom:8px; padding:6px; border-bottom:1px dashed #ccc; color:${color};">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <b style="font-size:0.8rem;">[${d.topic}] ${d.content}</b>
                <button onclick="completeTask(${d.id}, 'dead')" style="font-size:0.6rem; cursor:pointer;">äº†ç»“</button>
            </div>
            <div style="font-size:0.7rem; opacity:0.8; margin-top:2px;">
                æœŸé™: ${d.due} | å‰©ä½™: <span style="font-weight:bold;">${diffDays}</span> æ—¥${warning}
                ${d.tag ? `<span style="float:right; font-style:italic;">#${d.tag}</span>` : ''}
            </div>
        </div>
    `;
}).join('') || '<div style="opacity:0.5; font-size:0.7rem;">äº‘æ·¡é£è½»ï¼Œæš‚æ— é›·åŠ«å‹é¡¶ã€‚</div>';

        // æ¸²æŸ“å¥‡é‡
        document.getElementById('adventure-list').innerHTML = state.adventures.slice(-3).map(a => `
            <div style="margin-bottom:4px;"><b>#${a.type}</b>: ${a.content}</div>
        `).join('') || 'å¾…è§…æœºç¼˜ã€‚';

        document.getElementById('realm-display').innerText = `${getRealm(state.overall)} (${state.overall.toFixed(3)})`;
        document.getElementById('exp-bar').style.width = Math.min(100, (state.totalExp/NEED_EXP)*100) + "%";
        if(!myChart) initChart(); else updateChart();
    }

    function showWeeklySummary() {
        const logs = state.weeklyLogs.slice(-15).reverse().map(l => `ã€${l.date}ã€‘${l.type}\n${l.content}`).join('\n\n---\n\n');
        showModal("ğŸ“– ä¸ƒæ—¥ä¿®è¡Œæ‰¹æ–‡", logs || "è¯†æµ·ç©ºç©ºï¼Œå°šæ— å¥‡é‡è®°å½•ã€‚");
    }

    function initChart() {
        const ctx = document.getElementById('radarChart').getContext('2d');
        myChart = new Chart(ctx, {
            type: 'radar',
            data: { labels: ["ç ´å±€", "æŒæ§", "é“å¿ƒ", "è¾¨æ"], datasets: [{ data: [6.5, 5, 4, 4], backgroundColor: 'rgba(160, 82, 45, 0.2)', borderColor: '#a0522d', borderWidth: 2 }] },
            options: { scales: { r: { min: 2, max: 10, ticks: { display: false } } }, plugins: { legend: { display: false } }, maintainAspectRatio: false }
        });
    }
    function updateChart() { myChart.data.datasets[0].data = ["ç ´å±€", "æŒæ§", "é“å¿ƒ", "è¾¨æ"].map(l => state.attributes[l]); myChart.update(); }
    function getRealm(v) { return v < 6.0 ? "ç­‘åŸºåæœŸ" : (v < 7.5 ? "åŠæ­¥é‡‘ä¸¹" : "å‡†åšå£«åœ†æ»¡"); }
    function showModal(t, c) { document.getElementById('modal-title').innerText = t; document.getElementById('modal-content').innerText = c; document.getElementById('overlay').style.display = 'flex'; }
    function closeModal() { document.getElementById('overlay').style.display = 'none'; }
    window.onload = renderUI;
</script>
</body>
</html>

